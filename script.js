const translations = {
    en: {
        nav_offer: "Our Offer",
        nav_careers: "Careers",
        nav_gallery: "Gallery",
        nav_contact: "Contact",
        hero_title: "Yūgen Real-Time",
        hero_subtitle: "Unreal Engine 5: Desert Settlement Visualization",
        hero_desc: "An ambitious student startup crafting immersive, high-fidelity environments. Explore our journey in real-time visualization.",
        project_title: "Projects",
        project_title_main: "Projects",
        img_placeholder: "Settlement Overview",
        team_title: "The Founders",

        // Dawid
        role_dawid: "Founder & CEO",
        subrole_dawid: "Product & Real-Time 3D Lead (Unreal Engine)",
        bio_dawid: "Startup initiator and co-creator of visualization projects. Responsible for product vision, company direction, and Unreal Engine work on scene building and real-time 3D solutions.",

        // Karol
        role_karol: "Co-Founder & Creative Lead",
        subrole_karol: "3D Assets & Visual Direction (Unreal Engine)",
        bio_karol: "Co-founder responsible for creating 3D assets and visualization aesthetics. Works in Unreal Engine on quality, style, and visual consistency of projects.",

        // Mikolaj
        role_mikolaj: "Co-Founder & Technical Visual Designer",
        subrole_mikolaj: "Scene Building & Real-Time 3D (Unreal Engine)",
        bio_mikolaj: "Co-founder dealing with scene building, environment layout, and the technical side of real-time visualization in Unreal Engine.",

        offer_title: "What We Do",
        offer_desc: "We are currently focused on educational projects, pushing the boundaries of real-time rendering and interactive storytelling.",
        careers_title: "Join Us",
        careers_desc: "We are not currently hiring, but we are always open to collaboration. If you share our passion for 3D art and design, reach out.",
        email_cta: "Email Us",
        footer_rights: "© 2026 Yūgen Real-Time. All rights reserved.",

        // FAQ EN
        faq_title: "Frequently Asked Questions",
        faq_q9: "Are you a registered company?",
        faq_a9: "No, currently we are a startup founded by three university students working towards turning this initiative into a full-fledged company.",
        faq_q3: "Are you beginners?",
        faq_a3: "Yes, we are a student startup constantly learning and evolving.",
        faq_q1: "Do you take commercial projects?",
        faq_a1: "Not specifically. We are currently an educational project focusing on skill development. If we reach a level suitable for top-tier services, we will announce it.",
        faq_q2: "Are your educational projects open source?",
        faq_a2: "Most likely, yes. We are currently in the process of building our portfolio and will share selected resources.",
        faq_q6: "Do you create games in Unreal Engine?",
        faq_a6: "No, our primary focus is on high-fidelity visualization, not game development mechanics.",
        faq_q8: "Can we meet in person?",
        faq_a8: "No, our startup operates fully remotely. All work and team meetings take place online.",
        faq_q7: "What languages do you speak?",
        faq_a7: "We speak English and Polish fluently.",
        faq_q5: "Can I join your team?",
        faq_a5: "We are not openly recruiting at the moment, but as our projects scale, we might be looking. Feel free to send us a message regardless.",
        faq_q4: "Can I contact you directly?",
        faq_a4: "Yes, absolutely. You can reach us at <a href='mailto:davidkamys@yahoo.com' style='color: var(--desert-gold);'>davidkamys@yahoo.com</a>."
    },
    pl: {
        nav_offer: "Oferta",
        nav_careers: "Kariera",
        nav_gallery: "Galeria",
        nav_contact: "Kontakt",
        hero_title: "Yūgen Real-Time",
        hero_subtitle: "Unreal Engine 5: Pustynna Osada",
        hero_desc: "Ambitny studencki startup tworzący immersyjne środowiska high-fidelity. Poznaj naszą podróż w świecie wizualizacji czasu rzeczywistego.",
        project_title: "Projekty",
        project_title_main: "Projekty",
        img_placeholder: "Wizualizacja Projektu",
        team_title: "Zespół",

        // Dawid
        role_dawid: "Founder & CEO",
        subrole_dawid: "Product & Real-Time 3D Lead (Unreal Engine)",
        bio_dawid: "Inicjator startupu. Odpowiada za wizję produktu, kierunek rozwoju firmy oraz pracę w silniku Unreal Engine nad budową scen i rozwiązaniami Real-Time.",

        // Karol
        role_karol: "Co-Founder & Creative Lead",
        subrole_karol: "3D Assets & Visual Direction (Unreal Engine)",
        bio_karol: "Współzałożyciel odpowiedzialny za kreację assetów 3D i estetykę wizualną. Dba o jakość, styl i spójność artystyczną projektów w Unreal Engine.",

        // Mikolaj
        role_mikolaj: "Co-Founder & Technical Visual Designer",
        subrole_mikolaj: "Scene Building & Real-Time 3D (Unreal Engine)",
        bio_mikolaj: "Współzałożyciel zajmujący się budową scen (Level Art) oraz technicznymi aspektami wizualizacji czasu rzeczywistego w Unreal Engine.",

        offer_title: "Czym się zajmujemy",
        offer_desc: "Skupiamy się na projektach edukacyjnych, badając granice renderingu czasu rzeczywistego i interaktywnej narracji.",
        careers_title: "Dołącz do nas",
        careers_desc: "Obecnie nie prowadzimy rekrutacji, ale zawsze jesteśmy otwarci na ciekawe współprace. Jeśli pasjonujesz się grafiką 3D – napisz do nas.",
        email_cta: "Napisz do nas",
        footer_rights: "© 2026 Yūgen Real-Time. Wszelkie prawa zastrzeżone.",

        // FAQ PL
        faq_title: "FAQ",
        faq_q9: "Czy jesteście zarejestrowaną firmą?",
        faq_a9: "Jeszcze nie. Jesteśmy startupem założonym przez trzech studentów, dążącym do przekształcenia tej inicjatywy w pełni funkcjonującą firmę.",
        faq_q3: "Czy jesteście początkujący?",
        faq_a3: "Jesteśmy studenckim zespołem, który stawia na ciągły rozwój i naukę nowych technologii.",
        faq_q1: "Czy realizujecie projekty komercyjne?",
        faq_a1: "Na ten moment skupiamy się na rozwoju umiejętności (projekty edukacyjne). Otworzymy się na usługi komercyjne, gdy osiągniemy satysfakcjonujący nas poziom.",
        faq_q2: "Czy wasze projekty będą Open Source?",
        faq_a2: "Prawdopodobnie tak. Budujemy portfolio i planujemy udostępniać wybrane zasoby społeczności.",
        faq_q6: "Czy tworzycie gry w Unreal Engine?",
        faq_a6: "Nie. Naszym głównym celem jest wizualizacja High-Fidelity (architektoniczna, środowiskowa), a nie mechanika gier (Game Dev).",
        faq_q8: "Czy możemy spotkać się osobiście?",
        faq_a8: "Działamy w modelu zdalnym. Wszystkie spotkania i prace odbywają się online.",
        faq_q7: "W jakich językach mówicie?",
        faq_a7: "Płynnie komunikujemy się po polsku i angielsku.",
        faq_q5: "Czy mogę dołączyć do zespołu?",
        faq_a5: "Nie prowadzimy aktywnej rekrutacji, ale wraz ze skalą projektów to może się zmienić. Więc śmiało odezwij się.",
        faq_q4: "Czy można się z wami skontaktować bezpośrednio?",
        faq_a4: "Jasne. Napisz bezpośrednio na <a href='mailto:davidkamys@yahoo.com' style='color: var(--desert-gold);'>davidkamys@yahoo.com</a>."
    },
    jp: {
        nav_offer: "サービス",
        nav_careers: "採用情報",
        nav_gallery: "ギャラリー",
        nav_contact: "コンタクト",
        hero_title: "Yūgen Real-Time",
        hero_subtitle: "Unreal Engine 5: 砂漠の集落",
        hero_desc: "没入感のある高精細な環境を作り出す、野心的な学生スタートアップ。リアルタイムビジュアライゼーションへの挑戦をご覧ください。",
        project_title: "プロジェクト",
        project_title_main: "プロジェクト",
        img_placeholder: "プロジェクト概要",
        team_title: "チーム",

        // Dawid
        role_dawid: "創設者 & CEO",
        subrole_dawid: "プロダクト & リアルタイム3Dリード (Unreal Engine)",
        bio_dawid: "発起人であり、プロジェクトの共同制作者。プロダクトのビジョン、方向性、Unreal Engineでのシーン構築とリアルタイム3Dソリューションを統括。",

        // Karol
        role_karol: "共同創設者 & クリエイティブリード",
        subrole_karol: "3Dアセット & ビジュアルディレクション (Unreal Engine)",
        bio_karol: "3Dアセット制作と美学を担当。Unreal Engineにおける品質、スタイル、そして視覚的な一貫性を追求しています。",

        // Mikolaj
        role_mikolaj: "共同創設者 & テクニカルビジュアルデザイナー",
        subrole_mikolaj: "シーン構築 & リアルタイム3D (Unreal Engine)",
        bio_mikolaj: "シーン構築 (Level Art) と環境レイアウト、リアルタイムビジュアライゼーションの技術面を担当。",

        offer_title: "私たちの活動",
        offer_desc: "現在は教育プロジェクトに注力し、リアルタイムレンダリングとインタラクティブなストーリーテリングの可能性を探求しています。",
        careers_title: "採用について",
        careers_desc: "現在、積極的な採用は行っていませんが、コラボレーションは歓迎です。3Dアートとデザインに情熱をお持ちの方はご連絡ください。",
        email_cta: "メールを送る",
        footer_rights: "© 2026 Yūgen Real-Time. All rights reserved.",

        // FAQ JP
        faq_title: "よくある質問",
        faq_q9: "法人化されていますか？",
        faq_a9: "いいえ。現在は3人の大学生によるスタートアップであり、将来的な本格的なスタジオ設立を目指して活動しています。",
        faq_q3: "初心者ですか？",
        faq_a3: "私たちは常に学び、進化し続ける学生スタートアップチームです。",
        faq_q1: "商用プロジェクトは受けていますか？",
        faq_a1: "基本的には教育プロジェクトとしてスキル向上に集中しています。トップレベルの品質を提供できる段階になれば、お知らせします。",
        faq_q2: "プロジェクトはオープンソースですか？",
        faq_a2: "恐らくそうなる予定です。ポートフォリオ構築の一環として、選りすぐりのリソースを公開する予定です。",
        faq_q6: "Unreal Engineでゲームを作っていますか？",
        faq_a6: "いいえ。私たちの焦点はゲームメカニクス（Game Dev）ではなく、高精細なビジュアライゼーション（High-Fidelity Visualization）にあります。",
        faq_q8: "直接会うことはできますか？",
        faq_a8: "いいえ、私たちは完全リモート（Remote First）で運営しています。すべての業務とミーティングはオンラインで行われます。",
        faq_q7: "対応言語は何ですか？",
        faq_a7: "英語とポーランド語に対応しています。",
        faq_q5: "チームに参加できますか？",
        faq_a5: "現在は公募していませんが、プロジェクトの拡大に伴い募集する可能性があります。ご連絡はいつでも歓迎です。",
        faq_q4: "直接連絡をとることは可能ですか？",
        faq_a4: "もちろんです。<a href='mailto:davidkamys@yahoo.com' style='color: var(--desert-gold);'>davidkamys@yahoo.com</a> まで直接メールをください。"
    }
};

document.addEventListener('DOMContentLoaded', () => {
    // Language State - Load from LocalStorage or default to 'en'
    let currentLang = localStorage.getItem('siteLanguage') || 'en';

    // DOM Elements
    const langBtns = document.querySelectorAll('.lang-btn');

    // Initialize UI with stored language
    langBtns.forEach(btn => {
        if (btn.dataset.lang === currentLang) {
            btn.classList.add('active');
        } else {
            btn.classList.remove('active');
        }
    });

    // Initialize Content
    updateContent();
    revealOnScroll();

    // Event Listeners
    langBtns.forEach(btn => {
        btn.addEventListener('click', (e) => {
            // Traverse up to find button if clicked on image
            const button = e.target.closest('.lang-btn');
            if (button) {
                currentLang = button.dataset.lang;

                // Save to LocalStorage
                localStorage.setItem('siteLanguage', currentLang);

                // Update UI Interface
                langBtns.forEach(b => b.classList.remove('active'));
                button.classList.add('active');

                // Update Text
                updateContent();

                // Optional: Update HTML lang attribute for accessibility
                document.documentElement.lang = currentLang;
            }
        });
    });

    // Mobile Menu
    const mobileBtn = document.querySelector('.mobile-menu-btn');
    const closeMenuBtn = document.querySelector('.close-menu-btn');
    const mobileOverlay = document.querySelector('.mobile-menu-overlay');
    const mobileLinks = document.querySelectorAll('.mobile-link');

    function toggleMenu() {
        mobileOverlay.classList.toggle('open');
        document.body.style.overflow = mobileOverlay.classList.contains('open') ? 'hidden' : '';
    }

    if (mobileBtn) mobileBtn.addEventListener('click', toggleMenu);
    if (closeMenuBtn) closeMenuBtn.addEventListener('click', toggleMenu);

    mobileLinks.forEach(link => {
        link.addEventListener('click', toggleMenu);
    });

    window.addEventListener('scroll', revealOnScroll);

    function updateContent() {
        // Fallback to English if translation missing
        const langData = translations[currentLang] || translations['en'];

        // Update all elements with data-i18n attribute
        document.querySelectorAll('[data-i18n]').forEach(element => {
            const key = element.getAttribute('data-i18n');
            if (langData[key]) {
                // Fade effect for text change
                element.style.opacity = '0';
                setTimeout(() => {
                    element.innerHTML = langData[key];
                    element.style.opacity = '1';
                }, 200);
            }
        });
    }

    function revealOnScroll() {
        var reveals = document.querySelectorAll(".reveal");

        for (var i = 0; i < reveals.length; i++) {
            var windowHeight = window.innerHeight;
            var elementTop = reveals[i].getBoundingClientRect().top;
            var elementVisible = 150;

            if (elementTop < windowHeight - elementVisible) {
                reveals[i].classList.add("active");
            }
        }
    }

    // Lightbox Logic
    window.openLightbox = function (src) {
        const lightbox = document.getElementById('lightbox');
        const img = document.getElementById('lightbox-img');
        if (lightbox && img) {
            lightbox.style.display = 'block';
            img.src = src;
            document.body.style.overflow = 'hidden';

            // Add escape key listener
            document.addEventListener('keydown', function (e) {
                if (e.key === 'Escape') {
                    window.closeLightbox();
                }
            }, { once: true });
        }
    };

    window.closeLightbox = function () {
        const lightbox = document.getElementById('lightbox');
        if (lightbox) {
            lightbox.style.display = 'none';
            document.body.style.overflow = '';
        }
    };

    // Initial reveal for hero
    setTimeout(() => {
        const heroContent = document.querySelector('.hero-content');
        if (heroContent) {
            heroContent.classList.add('active');
            heroContent.classList.add('reveal');
        }
    }, 100);
});
